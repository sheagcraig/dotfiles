---
- hosts: all
  connection: local

  vars_files:
    - config.yaml

  roles:
    - role: dotfiles

  tasks:
    - name: Git init included submodules.
      command: git submodule update --init --recursive

    - name: Install powerline fonts.
      command: fonts/install.sh

    - name: Install yum packages for Linux.
      yum:
        name: "{{ item }}"
        state: latest
      when: ansible_distribution in ['CentOS', 'RHEL']
      with_items: "{{ yum_packages }}"

...